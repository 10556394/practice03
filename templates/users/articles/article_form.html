{% extends 'users/base.html' %}

{% block content %}
  {% include 'users/articles/menu.html' %}
  <div id="content">
    {% include 'users/articles/my_left.html' %}
    <div id="main">
      <p class="page_title">記事を投稿</p>
      <div id="article">

        <form class="post-form-to-edit-portfolio" action="{% url 'users:article_regist' %}" method="post" enctype="multipart/form-data">
          {% for form in forms %}
            {{ form.label }}<br>
            {{ form }}<br>
          {% endfor %}

          <!-- 画像フォーム１：普通の画像選択フォーム （動作確認済み）//-->
          <!-- {% for photo in photos %}{{ photo.label }}{{ photo }}{% endfor %}<br> //-->

          <!-- 画像フォーム２：プレビュー付きフォーム領域 （動作確認済み） //-->
          <!-- 動作復活する場合は、preview.js の画像プレビュースクリプト１：をコメントアウト解除する -->
          <!-- {{ imgs.as_p }} {{ form.media }} -->

          <!-- 画像フォーム３：複数プレビュー付きフォーム領域（動作エラーあり。画像選択ウィンドウを複数またいで画像選択した場合、最後の選択画像しか登録されない）//-->
          {% load widget_tweaks %}
          <div class="form-group">
            <div class="form-row">
              <div class="col-md-12">
                <div id="upload-portfolio-image-btn" class="upload-portfolio-image-btn">
                  クリックで画像をアップロード<br>
                  JPEG / PNG / GIF形式に対応しています
                </div>
                {% render_field photos.image class="custom-file-input upload-portfolio-image" multiple="" %}
                {% for error in photos.image.image.errors %}
                <span class="text-warning">{{ error }}</span>
                {% endfor %}
              </div>
            </div>
            <div class="form-row portfolio-image-group"></div>
          </div>
          <!-- 画像フォーム３：複数プレビュー付きフォーム領域ここまで //-->
          
          <hr class="hidden_hr mb50">
          {% csrf_token %}
          <input class="clear_both" type="submit" name="" value="投稿">
        </form>
      </div>
    </div>
    <div id="right"></div>
  </div>

{% endblock content%}